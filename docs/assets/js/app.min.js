(()=>{var e={839:()=>{Date.prototype.daysInMonth=function(){return 33-new Date(this.getFullYear(),this.getMonth(),33).getDate()}},969:()=>{},379:e=>{"use strict";var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var s={},o=[],i=0;i<e.length;i++){var c=e[i],u=n.base?c[0]+n.base:c[0],l=s[u]||0,d="".concat(u," ").concat(l);s[u]=l+1;var h=r(d),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var m=a(p,n);n.byIndex=i,t.splice(i,0,{identifier:d,updater:m,references:1})}o.push(d)}return o}function a(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,a){var s=n(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var i=r(s[o]);t[i].references--}for(var c=n(e,a),u=0;u<s.length;u++){var l=r(s[u]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}s=c}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var a=void 0!==r.layer;a&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,a&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var s=r.sourceMap;s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0,(()=>{"use strict";var e=r(379),t=r.n(e),n=r(795),a=r.n(n),s=r(569),o=r.n(s),i=r(565),c=r.n(i),u=r(216),l=r.n(u),d=r(589),h=r.n(d),p=r(969),m=r.n(p),y={};y.styleTagTransform=h(),y.setAttributes=c(),y.insert=o().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=l(),t()(m(),y),m()&&m().locals&&m().locals,r(839);class f{pluralNum(e,t){const r=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:r>1&&r<5?t[1]:1==r?t[0]:t[2]}}class v extends f{constructor(){super(),this.$elements=document.querySelectorAll("[data-js=datepicker]"),this.$pickers=[],this.currentDate=new Date(Date.now()),this.currentDay=this.currentDate.getDate(),this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDaysInMonth=this.currentDate.daysInMonth(),this.months=["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],this.init()}init(){this.$elements.forEach((e=>{const t=this._generatePickers(e),r=t.yearPicker,n=t.monthPicker,a=t.dayPicker;this._generateYears(r),this._generateMonths(n),this._generateDays(a,this.currentDaysInMonth,"current"),[n,r].forEach((e=>{e.addEventListener("change",this._changeListener.bind(this,r,n,a))}))}))}_generatePickers(e){const t=document.createElement("select"),r=document.createElement("select"),n=document.createElement("select");t.dataset.js="datepicker-day",r.dataset.js="datepicker-month",n.dataset.js="datepicker-year";const a=document.createElement("option"),s=document.createElement("option"),o=document.createElement("option");return a.disabled=!0,s.disabled=!0,o.disabled=!0,a.selected=!0,s.selected=!0,o.selected=!0,a.innerText="День",s.innerText="Месяц",o.innerText="Год",a.value="",s.value="",o.value="",t.appendChild(a),r.appendChild(s),n.appendChild(o),e.appendChild(t),e.appendChild(r),e.appendChild(n),{dayPicker:t,monthPicker:r,yearPicker:n}}_generateYears(e){for(let t=0;t<90;t++){const r=document.createElement("option");r.value=this.currentYear-t,r.innerText=this.currentYear-t,this.currentYear-t===this.currentYear&&(r.selected=!0),e.appendChild(r)}}_generateMonths(e){for(let t=0;t<=11;t++){const r=document.createElement("option");r.value=t,r.innerText=this._getMonthName(t),t===this.currentMonth&&(r.selected=!0),e.appendChild(r)}}_generateDays(e,t,r){const n="number"==typeof r,a=e.querySelectorAll("option");a.length>1&&a.forEach((e=>{""!==e.value&&e.remove()}));for(let a=0;a<t;a++){const t=document.createElement("option");t.value=a+1,t.innerText=a+1,"current"===r?a+1===this.currentDay&&(t.selected=!0):n?a+1===r&&(t.selected=!0):a+1===1&&(t.selected=!0),e.appendChild(t)}}_getMonthName(e){return this.months[e]}_dateIsValid(e){return e instanceof Date&&!isNaN(e)}_numsToDate(e,t,r){return t=("0"+(t+1)).slice(-2),r=("0"+r).slice(-2),new Date(`${e}-${t}-${r}T12:00:00.000Z`)}_changeListener(e,t,r){const n=Number(r.value),a=Number(t.value),s=Number(e.value),o=this._numsToDate(s,a,n);if(this._dateIsValid(o))this._generateDays(r,o.daysInMonth(),n);else{const e=this._numsToDate(s,a,1).daysInMonth();this._generateDays(r,e,e)}}}class g extends f{constructor(){super(),this.$elements=document.querySelectorAll("[data-js=datediff]"),this.init()}init(){this.$elements.forEach((e=>{const t=document.querySelector(e.dataset.jsTargetDateFrom),r=document.querySelector(e.dataset.jsTargetDateTo);let n,a;if(!t||!r)throw console.error(e),new Error("Не найден один из датапикеров, проверьте селекторы в data аттрибутах");n={$day:t.querySelector("[data-js=datepicker-day]"),$month:t.querySelector("[data-js=datepicker-month]"),$year:t.querySelector("[data-js=datepicker-year]")},a={$day:r.querySelector("[data-js=datepicker-day]"),$month:r.querySelector("[data-js=datepicker-month]"),$year:r.querySelector("[data-js=datepicker-year]")};const s=this._calcDifference(n,a);this._printResult(e,s),[n.$day,n.$month,n.$year,a.$day,a.$month,a.$year].forEach((t=>t.addEventListener("change",this._pickersListener.bind(this,e,n,a))))}))}_pickersListener(e,t,r){const n=this._calcDifference(t,r);this._printResult(e,n)}_printResult(e,t){const r=[];t.years>0&&r.push(`${t.years} ${this.pluralNum(t.years,["год","года","лет"])}`),t.months>0&&r.push(`${t.months} ${this.pluralNum(t.months,["месяц","месяца","месяцев"])}`),t.days>0&&r.push(`${t.days} ${this.pluralNum(t.days,["день","дня","дней"])}`),0===r.length?e.innerText="Даты идентичны":e.innerText=`Между выбранными датами ${r.join(", ")}`}_calcDifference(e,t){const r=new Date(Number(e.$year.value),Number(e.$month.value),Number(e.$day.value)),n=new Date(Number(t.$year.value),Number(t.$month.value),Number(t.$day.value));let a;a=n<r?new Date(r-n):new Date(n-r);const s=a.getUTCFullYear()-1970,o=a.getUTCMonth();return{days:a.getUTCDate()-1,months:o,years:s}}}document.addEventListener("DOMContentLoaded",(()=>{new v,new g}))})()})();
//# sourceMappingURL=app.min.js.map