(()=>{var e={839:()=>{Date.prototype.daysInMonth=function(){return 33-new Date(this.getFullYear(),this.getMonth(),33).getDate()}},969:()=>{},379:e=>{"use strict";var t=[];function r(e){for(var r=-1,a=0;a<t.length;a++)if(t[a].identifier===e){r=a;break}return r}function a(e,a){for(var s={},i=[],o=0;o<e.length;o++){var c=e[o],u=a.base?c[0]+a.base:c[0],d=s[u]||0,l="".concat(u," ").concat(d);s[u]=d+1;var h=r(l),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var m=n(p,a);a.byIndex=o,t.splice(o,0,{identifier:l,updater:m,references:1})}i.push(l)}return i}function n(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,n){var s=a(e=e||[],n=n||{});return function(e){e=e||[];for(var i=0;i<s.length;i++){var o=r(s[i]);t[o].references--}for(var c=a(e,n),u=0;u<s.length;u++){var d=r(s[u]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=c}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var a=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(r)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var a="";r.supports&&(a+="@supports (".concat(r.supports,") {")),r.media&&(a+="@media ".concat(r.media," {"));var n=void 0!==r.layer;n&&(a+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),a+=r.css,n&&(a+="}"),r.media&&(a+="}"),r.supports&&(a+="}");var s=r.sourceMap;s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0,(()=>{"use strict";var e=r(379),t=r.n(e),a=r(795),n=r.n(a),s=r(569),i=r.n(s),o=r(565),c=r.n(o),u=r(216),d=r.n(u),l=r(589),h=r.n(l),p=r(969),m=r.n(p),f={};f.styleTagTransform=h(),f.setAttributes=c(),f.insert=i().bind(null,"head"),f.domAPI=n(),f.insertStyleElement=d(),t()(m(),f),m()&&m().locals&&m().locals,r(839);class y extends class{multiAppend(e,...t){t.forEach((t=>e.append(t)))}createNode(e,t){const r=document.createElement(e);return t.disabled&&(r.disabled=t.disabled),t.selected&&(r.selected=t.selected),t.text&&(r.innerText=t.text),t.value&&(r.value=t.value),t.datajs&&(r.dataset.js=t.datajs),t.child&&r.appendChild(t.child),r}}{constructor(){super()}months=["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"];_getMonthName(e){return this.months[e]}pluralNum(e,t){const r=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:r>1&&r<5?t[1]:1==r?t[0]:t[2]}_dateIsValid(e){return e instanceof Date&&!isNaN(e)}_numsToDate(e,t,r){return t=("0"+(t+1)).slice(-2),r=("0"+r).slice(-2),new Date(`${e}-${t}-${r}T12:00:00.000Z`)}}class v extends y{constructor(){super(),this.$elements=document.querySelectorAll("[data-js=datepicker]"),this.$pickers=[],this.currentDate=new Date(Date.now()),this.currentDay=this.currentDate.getDate(),this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDaysInMonth=this.currentDate.daysInMonth(),this.init()}init(){this.$elements.forEach((e=>{const t=this._generatePickers(e),r=t.yearPicker,a=t.monthPicker,n=t.dayPicker;this._generateYears(r),this._generateMonths(a),this._generateDays(n,this.currentDaysInMonth,"current"),[a,r].forEach((e=>{e.addEventListener("change",this._changeListener.bind(this,r,a,n))}))}))}_generatePickers(e){const t=this.createNode("option",{selected:!0,disabled:!0,text:"День",value:"default"}),r=this.createNode("option",{selected:!0,disabled:!0,text:"Месяц",value:"default"}),a=this.createNode("option",{selected:!0,disabled:!0,text:"Год",value:"default"}),n=this.createNode("select",{datajs:"datepicker-day",child:t}),s=this.createNode("select",{datajs:"datepicker-month",child:r}),i=this.createNode("select",{datajs:"datepicker-year",child:a});return this.multiAppend(e,n,s,i),{dayPicker:n,monthPicker:s,yearPicker:i}}_generateYears(e){for(let t=0;t<90;t++){const r=this.createNode("option",{value:this.currentYear-t,text:this.currentYear-t});this.currentYear-t===this.currentYear&&(r.selected=!0),e.appendChild(r)}}_generateMonths(e){for(let t=0;t<=11;t++){const r=this.createNode("option",{value:String(t),text:this._getMonthName(t)});t===this.currentMonth&&(r.selected=!0),e.appendChild(r)}}_generateDays(e,t,r){const a="number"==typeof r,n=e.querySelectorAll("option");n.length>1&&n.forEach((e=>{"default"!==e.value&&e.remove()}));for(let n=0;n<t;n++){const t=this.createNode("option",{value:n+1,text:n+1});"current"===r?n+1===this.currentDay&&(t.selected=!0):a?n+1===r&&(t.selected=!0):n+1===1&&(t.selected=!0),e.appendChild(t)}}_changeListener(e,t,r){const a=Number(r.value),n=Number(t.value),s=Number(e.value),i=this._numsToDate(s,n,a);if(this._dateIsValid(i))this._generateDays(r,i.daysInMonth(),a);else{const e=this._numsToDate(s,n,1).daysInMonth();this._generateDays(r,e,e)}}}class g extends y{constructor(){super(),this.$elements=document.querySelectorAll("[data-js=datediff]"),this.init()}init(){this.$elements.forEach((e=>{const t=document.querySelector(e.dataset.jsTargetDateFrom),r=document.querySelector(e.dataset.jsTargetDateTo);let a,n;if(!t||!r)throw console.error(e),new Error("Не найден один из датапикеров, проверьте селекторы в data аттрибутах");a={$day:t.querySelector("[data-js=datepicker-day]"),$month:t.querySelector("[data-js=datepicker-month]"),$year:t.querySelector("[data-js=datepicker-year]")},n={$day:r.querySelector("[data-js=datepicker-day]"),$month:r.querySelector("[data-js=datepicker-month]"),$year:r.querySelector("[data-js=datepicker-year]")};const s=this._calcDifference(a,n);this._printResult(e,s),[a.$day,a.$month,a.$year,n.$day,n.$month,n.$year].forEach((t=>t.addEventListener("change",this._pickersListener.bind(this,e,a,n))))}))}_pickersListener(e,t,r){const a=this._calcDifference(t,r);this._printResult(e,a)}_printResult(e,t){const r=[];t.years>0&&r.push(`${t.years} ${this.pluralNum(t.years,["год","года","лет"])}`),t.months>0&&r.push(`${t.months} ${this.pluralNum(t.months,["месяц","месяца","месяцев"])}`),t.days>0&&r.push(`${t.days} ${this.pluralNum(t.days,["день","дня","дней"])}`),0===r.length?e.innerText="Даты идентичны":e.innerText=`Между выбранными датами ${r.join(", ")}`}_extractInputsNumbers(e){return[Number(e.$year.value),Number(e.$month.value),Number(e.$day.value)]}_calcDifference(e,t){const r=new Date(...this._extractInputsNumbers(e)),a=new Date(...this._extractInputsNumbers(t));let n;n=a<r?new Date(r-a):new Date(a-r);const s=n.getUTCFullYear()-1970,i=n.getUTCMonth();return{days:n.getUTCDate()-1,months:i,years:s}}}document.addEventListener("DOMContentLoaded",(()=>{new v,new g}))})()})();
//# sourceMappingURL=app.min.js.map